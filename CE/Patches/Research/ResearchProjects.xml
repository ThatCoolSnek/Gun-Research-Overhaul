<?xml version="1.0" encoding="utf-8"?>

<Patch>
	
	<Operation Class="PatchOperationReplace">

		<xpath>Defs/ResearchProjectDef[defName="Gunsmithing"]/prerequisites</xpath>
		<value>
			<prerequisites>
				<li>Snek_MetallicCartridges</li>
			</prerequisites>
		</value>

	</Operation>
	<Operation Class="PatchOperationSequence">
		<operations>
		<!-- moves gunpowder to new tab -->

			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName="CE_Gunpowder"]</xpath>
				<value>
					<tab>Snek_ResearchTab_Weapons</tab>
				</value>
			</li>
	
			<li Class="PatchOperationReplace">
				<xpath>Defs/ResearchProjectDef[defName="CE_Gunpowder"]/researchViewX</xpath>
				<value>
					<researchViewX>0.00</researchViewX>
				</value>
			</li>
	
			<li Class="PatchOperationReplace">
				<xpath>Defs/ResearchProjectDef[defName="CE_Gunpowder"]/researchViewY</xpath>
				<value>
					<researchViewY>0.7</researchViewY>
				</value>
			</li>

			<!--<li Class="PatchOperationRemove">
				<xpath>Defs/ResearchProjectDef[defName="Gunsmithing"]/hiddenPrerequisites</xpath>
			</li>-->

		</operations>
	</Operation>

	<Operation Class="PatchOperationSequence">
		<operations>
		<!-- moves gunpowder to new tab -->

			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName="CE_TurretHeavyWeapons"]</xpath>
				<value>
					<tab>Snek_ResearchTab_Weapons</tab>
				</value>
			</li>

			<li Class="PatchOperationRemove">
				<xpath>Defs/ResearchProjectDef[defName="CE_TurretHeavyWeapons"]/prerequisites</xpath>
			</li>
	
			<li Class="PatchOperationReplace">
				<xpath>Defs/ResearchProjectDef[defName="CE_TurretHeavyWeapons"]/researchViewX</xpath>
				<value>
					<researchViewX>4</researchViewX>
				</value>
			</li>
	
			<li Class="PatchOperationReplace">
				<xpath>Defs/ResearchProjectDef[defName="CE_TurretHeavyWeapons"]/researchViewY</xpath>
				<value>
					<researchViewY>2.1</researchViewY>
				</value>
			</li>
		</operations>
	</Operation>

	<Operation Class="PatchOperationSequence">
		<operations>
		<!-- moves simple launchers to new tab + removes vanilla version-->

			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName="CE_Launchers"]</xpath>
				<value>
					<tab>Snek_ResearchTab_Weapons</tab>
				</value>
			</li>

			<li Class="PatchOperationRemove">
				<xpath>Defs/ResearchProjectDef[defName="CE_Launchers"]/prerequisites</xpath>
			</li> 
	
			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName="CE_Launchers"]</xpath>
				<value>
					<prerequisites>
						<li>Gunsmithing</li>
					</prerequisites>
				</value>
			</li>
	
			<li Class="PatchOperationReplace">
				<xpath>Defs/ResearchProjectDef[defName="CE_Launchers"]/researchViewX</xpath>
				<value>
					<researchViewX>1</researchViewX>
				</value>
			</li>
	
			<li Class="PatchOperationReplace">
				<xpath>Defs/ResearchProjectDef[defName="CE_Launchers"]/researchViewY</xpath>
				<value>
					<researchViewY>2.1</researchViewY>
				</value>
			</li>
		</operations>
	</Operation>
	
		<Operation Class="PatchOperationSequence">
		<operations>
		<!-- moves Advanced launchers to new tab -->

			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedLaunchers"]</xpath>
				<value>
					<tab>Snek_ResearchTab_Weapons</tab>
				</value>
			</li>

			<li Class="PatchOperationRemove">
				<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedLaunchers"]/prerequisites</xpath>
			</li> 
	
			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedLaunchers"]</xpath>
				<value>
					<prerequisites>
						<li>CE_Launchers</li>
					</prerequisites>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedLaunchers"]</xpath>
				<value>
					<hiddenPrerequisites>
						<li>MultiAnalyzer</li>
					</hiddenPrerequisites>
				</value>
			</li>
	
			<li Class="PatchOperationReplace">
				<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedLaunchers"]/researchViewX</xpath>
				<value>
					<researchViewX>2</researchViewX>
				</value>
			</li>
	
			<li Class="PatchOperationReplace">
				<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedLaunchers"]/researchViewY</xpath>
				<value>
					<researchViewY>2.1</researchViewY>
				</value>
			</li>
		</operations>
	</Operation>

	
	
	<Operation Class="PatchOperationSequence">
	<operations>
		<!-- moves basic opto thingo to new tab + rename optics -->

		<li Class="PatchOperationAdd">
		<xpath>Defs/ResearchProjectDef[defName="CE_SimpleNV"]</xpath>
		<value>
			<tab>Snek_ResearchTab_Weapons</tab>
		</value>
	</li>

	<li Class="PatchOperationRemove">
		<xpath>Defs/ResearchProjectDef[defName="CE_SimpleNV"]/prerequisites</xpath>
	</li> 

	<li Class="PatchOperationAdd">
		<xpath>Defs/ResearchProjectDef[defName="CE_SimpleNV"]</xpath>
		<value>
			<prerequisites>
				<li>Snek_SimpleScopes</li>
			</prerequisites>
		</value>
	</li>
	
	<li Class="PatchOperationAdd">
		<xpath>Defs/ResearchProjectDef[defName="CE_SimpleNV"]</xpath>
		<value>
			<hiddenPrerequisites>
				<li>Machining</li>
			</hiddenPrerequisites>
		</value>
	</li>

	<li Class="PatchOperationReplace">
		<xpath>Defs/ResearchProjectDef[defName="CE_SimpleNV"]/researchViewX</xpath>
		<value>
			<researchViewX>3</researchViewX>
		</value>
	</li>

	<li Class="PatchOperationReplace">
		<xpath>Defs/ResearchProjectDef[defName="CE_SimpleNV"]/researchViewY</xpath>
		<value>
			<researchViewY>6.3</researchViewY>
		</value>
	</li>

	</operations>
	</Operation>

	<Operation Class="PatchOperationSequence">
		<operations>
			<!-- moves advanced opto thingo to new tab-->
	
			<li Class="PatchOperationAdd">
			<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedNV"]</xpath>
			<value>
				<tab>Snek_ResearchTab_Weapons</tab>
			</value>
		</li>
	
		<li Class="PatchOperationRemove">
			<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedNV"]/prerequisites</xpath>
		</li>

		<li Class="PatchOperationRemove">
			<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedNV"]/hiddenPrerequisites</xpath>
		</li>
		
		<li Class="PatchOperationAdd">
			<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedNV"]</xpath>
			<value>
				<hiddenPrerequisites>
					<li>MicroelectronicsBasics</li>
				</hiddenPrerequisites>
			</value>
		</li>

		<li Class="PatchOperationAdd">
			<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedNV"]</xpath>
			<value>
				<prerequisites>
					<li>CE_SimpleNV</li>
				</prerequisites>
			</value>
		</li>	

		<li Class="PatchOperationReplace">
			<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedNV"]/researchViewX</xpath>
			<value>
				<researchViewX>4</researchViewX>
			</value>
		</li>
	
		<li Class="PatchOperationReplace">
			<xpath>Defs/ResearchProjectDef[defName="CE_AdvancedNV"]/researchViewY</xpath>
			<value>
				<researchViewY>6.3</researchViewY>
			</value>
		</li>
	
		</operations>
		</Operation>
</Patch>